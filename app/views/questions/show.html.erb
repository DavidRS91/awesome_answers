<div class="tag-list">
  <% @question.tags.order(:name).each do |tag| %>
    <span class="badge badge-pill badge-primary">
      <%= tag.name %>
    </span>
  <% end %>
</div>

<h2><%= @question.title %></h2>

<p><%= @question.body %></p>

<p><small>
  Posted <%= time_ago_in_words(@question.created_at)%> ago
  •
  Last edited <%= time_ago_in_words @question.updated_at %> ago
  •
  View Count: <%= @question.view_count %>
  •
  By: <%= @question.user&.full_name || '[DELETED]' %>
</small></p>



<div class="">
  <% if can?(:manage, @question) %>
   <%= link_to 'Edit', edit_question_path(@question) %>
   |
   <%= link_to 'Delete',
    question_path(@question),
    method: :delete,
    data: {
      confirm: 'Are you sure?'
    }
    %>
    <% end %>
</div>

<div class="like-widget">
<% if @like %>
  <%= link_to fa_icon('heart 2x'), like_path(@like), method: :delete %>
<% else %>
  <%= link_to fa_icon('heart-o 2x'), question_likes_path(@question), method: :post %>
<% end %>
<%= pluralize(@question.likes.count, 'like') %>
</div>

<h3>Answers</h3>

<%= form_for [@question,@answer] do |f| %>
<% if @answer.errors.present? %>
  <%= @answer.errors.full_messages.join(', ') %>
<% end %>
<div class="">
  <%= f.text_area :body, placeholder: "What's on your mind?" %>
</div>
<%= f.submit "Answer Question" %>
<% end %>

<hr>
<div class="answer-list">
  <% @answers.each do |answer| %>
    <div class="answer-list-item">
      <p><%= answer.body %><br>
        <small>
        Answered <%= time_ago_in_words(answer.created_at)%> ago •
        By: <%= answer.user&.full_name || '[DELETED]' %>
      </small>
      <% if can?(:manage, answer) %>
      <small>
        •
        <%= link_to 'Delete',
         answer_path(answer),
         method: :delete,
         data: {
           confirm: 'Are you sure?'
         }
         %>
      </small>
    <% end %>
  </p>
      <hr>

    </div>
  <% end %>
</div>
